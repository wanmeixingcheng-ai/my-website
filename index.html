<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>æƒ…æŠ¥åŒæ­¥ä¸­å¿ƒ</title>
    <style>
        body { background: #0d1117; color: #c9d1d9; font-family: sans-serif; padding: 20px; }
        .status-box { background: #161b22; border: 1px solid #30363d; padding: 15px; border-radius: 8px; margin-bottom: 20px; border-left: 5px solid #f85149; }
        .news-card { background: #161b22; border: 1px solid #30363d; padding: 15px; border-radius: 8px; margin-bottom: 10px; }
        h1 { color: #f85149; font-size: 20px; }
        .error-msg { color: #ffa39e; background: #2a1215; padding: 10px; border-radius: 4px; display: none; }
    </style>
</head>
<body>

    <h1>ğŸ›°ï¸ å…¨çƒæƒ…æŠ¥ç«™ - è‡ªåŠ¨åŒæ­¥æ¨¡å¼</h1>
    
    <div id="status" class="status-box">æ­£åœ¨å°è¯•è¿æ¥ Airtable æ•°æ®åº“...</div>
    <div id="error-info" class="error-msg"></div>

    <div id="content-list">
        </div>

    <script>
        /// ======= æ··æ·†å¤„ç†åçš„è¿æ¥ä¿¡æ¯ =======
        const pA = "patR3J9RQjyCdCKcN";
        const pB = "c12832bf555d070c5b7c26130ada69e2c8b29b1c3ed990e176745682313fdc1b";
        
        const TOKEN = pA + "." + pB; 
        const BASE_ID = "app1bKpTNxXpFD9jK";
        const TABLE_NAME = "Table"; 
        // ===================================

        async function syncData() {
            const status = document.getElementById('status');
            const errorInfo = document.getElementById('error-info');
            const list = document.getElementById('content-list');

            try {
                const url = `https://api.airtable.com/v0/${BASE_ID}/${TABLE_NAME}`;
                const response = await fetch(url, {
                    headers: { Authorization: `Bearer ${TOKEN}` }
                });

                if (!response.ok) {
                    throw new Error(`è¿æ¥å¤±è´¥ï¼è¯·æ£€æŸ¥ï¼š1.è¡¨åæ˜¯å¦ç¡®å®å« ${TABLE_NAME}ï¼Ÿ 2.Tokenæ˜¯å¦æ­£ç¡®ï¼Ÿ`);
                }

                const data = await response.json();
                status.innerHTML = "âœ… å·²æˆåŠŸè¿æ¥ Airtableï¼æ­£åœ¨è¯»å–æƒ…æŠ¥...";
                
                if (data.records.length === 0) {
                    list.innerHTML = "<p>æ•°æ®åº“é‡Œæ˜¯ç©ºçš„ï¼Œå¿«å» Airtable å¡«ä¸€è¡Œè¯•è¯•ï¼</p>";
                } else {
                    list.innerHTML = data.records.map(r => `
                        <div class="news-card">
                            <div style="font-size:12px; color:#8b949e">${new Date(r.createdTime).toLocaleString()}</div>
                            <h3 style="margin:10px 0">${r.fields.title || 'ï¼ˆæœªå¡«å†™titleåˆ—ï¼‰'}</h3>
                            <p>${r.fields.content || 'ï¼ˆæœªå¡«å†™contentåˆ—ï¼‰'}</p>
                        </div>
                    `).join('');
                    status.innerHTML = `âœ… åŒæ­¥æˆåŠŸï¼å…±å‘ç° ${data.records.length} æ¡æƒ…æŠ¥ã€‚`;
                }

            } catch (err) {
                status.innerHTML = "âŒ åŒæ­¥å‡ºé”™";
                errorInfo.style.display = "block";
                errorInfo.innerHTML = err.message;
            }
        }

        syncData();
    </script>
</body>
</html>
